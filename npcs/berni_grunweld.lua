-- INSERT INTO npc VALUES (nextval('npc_seq'),2,124,581,0,4,false,'Berni Grunweld','npc_berni_grunweld.lua',0);

require("npcs.base.autonpcfunctions")

function useNPC(user,counter,param)
    thisNPC:increaseSkill(1,"common language",100);
    thisNPC:talkLanguage(CCharacter.say, CPlayer.german, "Finger weg!");
    thisNPC:talkLanguage(CCharacter.say, CPlayer.english, "Don't you touch me!");
end

function initializeNpc()
    if TraderFirst then
        return true;
    end

    InitTalkLists();

    -- ********* START DYNAMIC PART ********

    SetRadius(0);
    QuestID = 80;
    -- Queststatus Overview 
    -- 0: No Quest taken 
    -- 1: Quest 1 taken - gather 10 raw materials of two different kinds and 1 needed tools for +5 skill while skill<=20 
    -- 2: Quest 1 solved 
    -- 3: Quest 2 taken - gather 15 raw materials, 2 differnt tools and 5 semi finished products for +5 skill while 20<=40 
    -- 4: Quest 2 solved 
    -- 5: Quest 3 taken - gather 4 needed tools, 10 semi finished products of 2 kinds and 5 easy finished products for +5 skill while 40<=60 
    -- 6: Quest 3 solved 
    -- 7: Quest 4 taken - gather 15 semi finished products, 10 easy finished products of 2 kinds and 5 advanced finished products for skill+5 while 60<=80 
    -- 8: Quest 4 solved 
    -- Cycletext
    AddCycleText("#me blickt nachdenklich auf den Kochtopf vor sich","#me looks thoughtful to the kettle infront of him");
    AddCycleText("#me schwingt leise kichernd einen Kochlöffel durch die Luft.","#me swings his cooking spoon through the air and chuckles softly.");
    AddCycleText("#me versucht vergeblich einen kleinen Fleck auf seiner Hose mit einem Tuch weg zu wischen.","#me tries witout any luck to get rid of a small stain on his trousers.");
    AddCycleText("#me summt leise etwas vor sich hin.","#me hums quietly.");
    AddCycleText("#me wirft verschiedenes Gemüse in den Topf vor sich und mischt diese zusammen.","#me tosses different vegetables into the pot infront of him and mixes them together.");
    AddCycleText("#me schaut sich suchend um.","#me looks around as if looking for something.");
    -- Help 
    AddTraderTrigger("Help","[Game Help] This NPC is the cook Berni Grunweld. Keyphrases: Hello, quest, seed, adventure, hatchet, cooking spoon");
    AddTraderTrigger("Hilfe","[Spielhilfe] Dieser NPC ist der Koch Berni Grunweld. Schlüsselwörter: Hallo, Quest, Aufgaben, Samen, Beil, Kochlöffel ");
    -- General speech 
    AddTraderTrigger("greetings","Hiho, take a seat next me if you are hungry");
    AddAdditionalTrigger("hello");
    AddAdditionalTrigger("good evening");
    AddAdditionalTrigger("good day");
    AddAdditionalTrigger("good morning");
    AddAdditionalText("Huhu, sit next me I have something great to eat for you");
    AddTraderTrigger("grüße","Hiho du, setzt dich doch zu mir falls du Hunger hast");
    AddAdditionalTrigger("Tach");
    AddAdditionalTrigger("Guten Abend");
    AddAdditionalTrigger("Guten Morgen");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Huhu");
    AddAdditionalText("Huhu, schnapp dir ein Plätzchen neben mir, ich hab was ganz tolles zu essen.");
    AddTraderTrigger("Hiho","Hiho, take a seat next me if you are hungry");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Hey");
    AddAdditionalTrigger("Greebas");
    AddAdditionalTrigger("Greebs");
    AddCondition("lang","english");
    AddAdditionalText("Huhu, sit next me I have something great to eat for you");
    AddTraderTrigger("Hiho","Hiho du, setzt dich doch zu mir falls du Hunger hast");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Hey");
    AddAdditionalTrigger("Greebas");
    AddAdditionalTrigger("Greebs");
    AddCondition("lang","german");
    AddAdditionalText("Huhu, schnapp dir ein Plätzchen neben mir, ich hab was ganz tolles zu essen.");
    AddTraderTrigger("who are you","I'm Berni Grunweld the great cook and who are you?");
    AddAdditionalTrigger("whats your name");
    AddAdditionalTrigger("your name");
    AddAdditionalText("I'm Berni, yes Berni is alright");
    AddTraderTrigger("wer bist du","Ich bin der Berni Grunweld der großartige Koch und wer bist denn du?");
    AddAdditionalTrigger("wer seid ihr");
    AddAdditionalTrigger("wie heißt du");
    AddAdditionalTrigger("dein name");
    AddAdditionalText("Ich bin der Berni, ja Berni reicht vollkommen.");
    AddTraderTrigger("Farewell","Bye, i hope you will visit me again");
    AddAdditionalTrigger("good bye");
    AddAdditionalTrigger("bye");
    AddAdditionalTrigger("see you");
    AddAdditionalText("Good day to you, if you are hungry, just come to me again.");
    AddTraderTrigger("Auf bald","Tschüßi und besuch mich mal wieder.");
    AddAdditionalTrigger("Tschüß");
    AddAdditionalTrigger("Wiedersehen");
    AddAdditionalTrigger("Machs gut");
    AddAdditionalTrigger("Bis dann");
    AddAdditionalTrigger("Bis später");
    AddAdditionalTrigger("Schönen Tag noch");
    AddAdditionalText("Mach es gut du und komme schnell wieder wenn du Hunger hast.");
    AddTraderTrigger("how are you","I'm prett good, thank you, and how are you if I may ask?");
    AddAdditionalTrigger("how feel");
    AddAdditionalTrigger("how do you do");
    AddAdditionalText("I feel very well, yes very, very well, how about you?");
    AddTraderTrigger("wie gehts","Mir geht es ganz prima, danke. Wie geht es denn dir?");
    AddAdditionalTrigger("wie fühlst");
    AddAdditionalText("Ich fühle mich toll, ganz toll und du, geht es dir auch so gut?");
    -- Catching typical NPC phrases 
    AddTraderTrigger("what sell","I'm cook, not a trader");
    AddAdditionalTrigger("what buy");
    AddAdditionalTrigger("list wares");
    AddAdditionalTrigger("price of");
    AddAdditionalText("I prefer exchanging my wares, I don't like selling them");
    AddAdditionalText("I have nothing here, I could sell you");
    AddAdditionalText("I don't have any prices, because I don't sell anything.");
    AddTraderTrigger("was verkauf","Ich bin kein Händler, nur Koch.");
    AddAdditionalTrigger("was kauf");
    AddAdditionalTrigger("warenliste");
    AddAdditionalTrigger("preis von");
    AddAdditionalText("Ich tausche lieber als zu verkaufen");
    AddAdditionalText("Ich hab leider nichts da zum verkaufen");
    AddAdditionalText("Eine Preisliste habe ich nicht da, weil ich eigentlich nichts verkaufe");
    -- Small talk
    AddTraderTrigger("Beruf","Von Beruf bin ich Koch, ja genau.");
    AddAdditionalText("Ich bin Koch, einer der besten sogar!");
    AddTraderTrigger("profession","I'm a cook, that's right.");
    AddAdditionalTrigger("job");
    AddAdditionalText("I'm a cook, even the best!");
    AddTraderTrigger("gobaith","Gobaith? That's where all those refugees come from all of a sudden, right?");
    AddCondition("lang","english");
    AddTraderTrigger("gobiath","Gobaith? Da kommen diese ganzen Flüchtlinge plötzlich her, richtig?");
    AddCondition("lang","german");
    -- leaders, town and politics
    AddTraderTrigger("cadomyr","That's this desert town right? They probably have a hard time to find fresh ingredients there to cook. Maybe I should travel there and serve them some of my cabbage soup.");
    AddCondition("lang","english");
    AddTraderTrigger("cadomyr","Das ist diese Wüstenstadt, richtig? Die haben es sicher schwer, frische Zutaten zum kochen zu finden. Vielleicht sollte ich mal dort hinreisen und ihnen etwas von meiner Kohlsuppe servieren.");
    AddCondition("lang","german");
    AddTraderTrigger("runewick","Runewick is a mighty fine town, isn't it? Lots of fresh veggies and fruits for the perfect dish. The farmers here are the best!");
    AddCondition("lang","english");
    AddTraderTrigger("runewick","Runewick ist eine ganz prima Stadt oder? Viel frisches Obst und Gemüse für das perfecte Gericht. Die Bauern hier sind die besten!");
    AddCondition("lang","german");
    AddTraderTrigger("galmair","Galmair... I don't know much about this place, but I heard that you only are treated fair when you have enough money.");
    AddCondition("lang","english");
    AddTraderTrigger("galmair","Galmair... Ich weiß nicht viel über diesen Ort, aber ich habe gehört, dass man nur fair behandelt wird, wenn man genug Geld hat.");
    AddCondition("lang","german");
    AddTraderTrigger("queen","It is said that queen Rosaline of Cadomyr is really pretty but also very strict. I think I saw her once, when she visited the archmage and maybe she even had the chance to taste one of my cakes that day!");
    AddAdditionalTrigger("rosaline edwards");
    AddCondition("lang","english");
    AddTraderTrigger("königin","Es wird gesagt, das Königin Rosaline von Cadomyr sehr hübsch sein soll, aber auch sehr streng. Ich glaube ich habe sie mal gesehen, als sie den Erzmagier besuchte und vielleicht hatte sie an dem Tag auch die Chance einen meiner Kuchen zu probieren!");
    AddAdditionalTrigger("rosaline edwards");
    AddCondition("lang","german");
    AddTraderTrigger("archmage","Archmage Morgan is a really kind and generous leader and I trust him completely. He is good to us, even to the farmers and the once who do not have any profession at all.");
    AddAdditionalTrigger("Elvaine Morgan");
    AddCondition("lang","english");
    AddTraderTrigger("erzmagier","Erzmagier Morgan is ein großherziger und gütiger Anfürhrer und ich vertraue ihm. Er ist gut zu uns, sogar zu den Bauern und jenen die keine Arbeit haben.");
    AddAdditionalTrigger("Elvaine Morgan");
    AddCondition("lang","german");
    AddTraderTrigger("Valerio Guilianni","Valerion Gui..Guilia...Guilianni? Who's that? The name doesn't sound really friendly.");
    AddCondition("lang","english");
    AddTraderTrigger("Valerio Guilianni","Valerion Gui..Guilia...Guilianni? Wer ist denn das? Der Name hört sich nicht sehr freundlich an.");
    AddCondition("lang","german");
    -- Tool hints 
    AddTraderTrigger("seed","You will have to plant the seeds into the earth, so that they can grow. If you need more just ask Fred for some.");
    AddAdditionalTrigger("seedling");
    AddCondition("qpg","=",0);
    AddTraderTrigger("Samen","Die Samen musst du in die Erde einpflanzen, damit sie auch wachsen. Wenn du mehr braucht, frag einfach Fred nach ein paar.");
    AddCondition("qpg","=",0);
    AddTraderTrigger("cooking spoon","A carpenter can make you a cooking spoon, you sure find one on the market place or in the workshop.");
    AddCondition("qpg","=",0);
    AddTraderTrigger("Kochlöffel","Einen Kochlöffel kann dir auch ein Schreiner herstellen, den findest du sicher auf dem Marktplatz oder in der Werkstatt.");
    AddCondition("qpg","=",0);
    -- 1st quest
    AddTraderTrigger("quest","Yes, I have something to do for you. Bring me 10 onions and 10 cabbage, than I might let you taste from my soup and it would be nice if you bring me a cooking spoon as well. Here are some seeds and a sickle.");
    AddCondition("skill","baking","=<",20);
    AddCondition("lang","english");
    AddConsequence("item",534,30,399,0);
    AddConsequence("item",291,30,399,0);
    AddConsequence("item",126,1,399,0);
    AddConsequence("qpg","=",1);
    AddTraderTrigger("quest","Jup, ich hätte was für dich zu tun, bring mir 10 Zwiebeln sowie 10 Kohlköpfe, dann lass ich dich auch von meiner Suppe kosten und ein neuer Kochlöffel wäre auch nett. Ach und hier ist eine Sichel, die wirst du brauche und ein paar Samen.");
    AddCondition("skill","baking","=<",20);
    AddCondition("lang","german");
    AddConsequence("item",534,30,399,0);
    AddConsequence("item",291,30,399,0);
    AddConsequence("item",126,1,399,0);
    AddConsequence("qpg","=",1);
    AddTraderTrigger("task","Yes, I have something to do for you. Bring me 10 onions and 10 cabbage, than I might let you taste from my soup and it would be nice if you bring me a cooking spoon as well. Here are some seeds and a sickle.");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking","=<",20);
    AddConsequence("item",534,30,399,0);
    AddConsequence("item",291,30,399,0);
    AddConsequence("item",126,1,399,0);
    AddConsequence("qpg","=",1);
    AddTraderTrigger("Auftrag","Jup, ich hätte was für dich zu tun, bring mir 10 Zwiebeln sowie 10 Kohlköpfe, dann lass ich dich auch von meiner Suppe kosten und ein neuer Kochlöffel wäre auch nett. Ach und hier ist eine Sichel, die wirst du brauche und ein paar Samen.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking","=<",20);
    AddConsequence("item",534,30,399,0);
    AddConsequence("item",291,30,399,0);
    AddConsequence("item",126,1,399,0);
    AddConsequence("qpg","=",1);
    AddTraderTrigger("quest","If you don't bring me those 10 onions and 10 cabbage, I won't be able to make soup. And without a cooking spoon I cannot cook.");
    AddCondition("qpg","=",1);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Wenn du mir nicht die 10 Zwiebeln und die 10 Kohlköpfe bringst, kann ich leider auch keine Suppe machen. Und ohne den neuen Kochlöffel kann ich nicht kochen.");
    AddCondition("qpg","=",1);
    AddCondition("lang","german");
    AddTraderTrigger("task","If you don't bring me those 10 onions and 10 cabbage, I won't be able to make soup. And without a cooking spoon I cannot cook.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",1);
    AddTraderTrigger("Auftrag","Wenn du mir nicht die 10 Zwiebeln und die 10 Kohlköpfe bringst, kann ich leider auch keine Suppe machen. Und ohne den neuen Kochlöffel kann ich nicht kochen.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",1);
    AddTraderTrigger(".+","Ah, du bist zurück und du hast sogar alles da, was ich von dir wollte, sehr schön. Jetzt aber Augen auf!");
    AddCondition("qpg","=",1);
    AddCondition("item",290,"all",">",9);
    AddCondition("item",201,"all",">",9);
    AddCondition("item",227,"all",">",0);
    AddCondition("lang","german");
    AddConsequence("deleteitem",290,10);
    AddConsequence("deleteitem",201,10);
    AddConsequence("deleteitem",227,1);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",2);
    AddConsequence("inform","[Quest erfüllt] Du hast das Gefühl als hättest du heute viel gelernt.");
    AddTraderTrigger(".+","Ah, you're back and you even have everything with you, that I requested. Very good. Now watch closely!");
    AddCondition("qpg","=",1);
    AddCondition("item",290,"all",">",9);
    AddCondition("item",201,"all",">",9);
    AddCondition("item",227,"all",">",0);
    AddCondition("lang","english");
    AddConsequence("deleteitem",290,10);
    AddConsequence("deleteitem",201,10);
    AddConsequence("deleteitem",227,1);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",2);
    AddConsequence("inform","[Quest finished] You have the feeling that you've learnt a lot today.");
    AddTraderTrigger(".+","Das ist nicht alles was ich haben wollte, ich wollte 10 Kohlköpfe, 10 Zwiebeln und einen Kochlöffel!");
    AddCondition("qpg","=",1);
    AddCondition("item",290,"all","<",10);
    AddCondition("item",201,"all","<",10);
    AddCondition("item",227,"all","<",1);
    AddCondition("lang","german");
    AddTraderTrigger(".+","That's not everything I wanted. I wanted 10 cabbage, 10 onions and a cooking spoon.");
    AddCondition("qpg","=",1);
    AddCondition("item",290,"all","<",10);
    AddCondition("item",201,"all","<",10);
    AddCondition("item",227,"all","<",1);
    AddCondition("lang","english");
    -- 2nd quest
    AddTraderTrigger("quest","Oioioi, you again! Now bring me 15 tomatoes, a hatchet for a new fire and a bucket. And don't forget to bring me 5 bowls of onionsoup as well, I want to see if yours is as good as mine by now!");
    AddCondition("skill","baking",">",20);
    AddCondition("skill","baking","=<",40);
    AddCondition("lang","english");
    AddConsequence("qpg","=",3);
    AddTraderTrigger("quest","Uiuiui, da bist du ja wieder! Jetzt bring mir aber schnell 15 Tomaten, ein Beil für ein neues Feuer und einen Eimer. Und vergiss nicht mir auch noch 5 Schüsseln Zwiebelsuppe zu bringen, ich will sehen ob du die endlich genau so gut machen kannst wie ich! ");
    AddCondition("skill","baking",">",20);
    AddCondition("skill","baking","=<",40);
    AddCondition("lang","german");
    AddConsequence("qpg","=",3);
    AddTraderTrigger("task","Oioioi, you again! Now bring me 15 tomatoes, a hatchet for a new fire and a bucket. And don't forget to bring me 5 bowls of onionsoup as well, I want to see if yours is as good as mine by now!");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking",">",20);
    AddCondition("skill","baking","=<",40);
    AddConsequence("qpg","=",3);
    AddTraderTrigger("Auftrag","Uiuiui, da bist du ja wieder! Jetzt bring mir aber schnell 15 Tomaten, ein Beil für ein neues Feuer und einen Eimer. Und vergiss nicht mir auch noch 5 Schüsseln Zwiebelsuppe zu bringen, ich will sehen ob du die endlich genau so gut machen kannst wie ich!");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking",">",20);
    AddCondition("skill","baking","=<",40);
    AddConsequence("qpg","=",3);
    AddTraderTrigger("quest","You have to practice a little more, than I will gladly help you with more advances recipes.");
    AddCondition("qpg","=",2);
    AddCondition("skill","baking","=<",20);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Du musst noch ein bisschen mehr üben, dann helf ich dir auch gerne weiter bei schwierigeren Rezepten.");
    AddCondition("qpg","=",2);
    AddCondition("skill","baking","=<",20);
    AddCondition("lang","german");
    AddTraderTrigger("task","You have to practice a little more, than I will gladly help you with more advances recipes.");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking","=<",20);
    AddCondition("qpg","=",2);
    AddTraderTrigger("Auftrag","Du musst noch ein bisschen mehr üben, dann helf ich dir auch gerne weiter bei schwierigeren Rezepten.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking","=<",20);
    AddCondition("qpg","=",2);
    AddTraderTrigger("quest","Bring me the 15 tomatoes, the hatchet and the bucket, as well as 5 bowls of selfmade onionsoup and I will cook us a tasty stew!");
    AddCondition("qpg","=",3);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Bring mir die 15 Tomaten, das Beil und den Eimer, sowie deine 5 Schüsseln selbstgemacher Zwiebelsuppe und ich koch uns einen leckeren Eintopf!");
    AddCondition("qpg","=",3);
    AddCondition("lang","german");
    AddTraderTrigger("task","Bring me the 15 tomatoes, the hatchet and the bucket, as well as 5 bowls of selfmade onionsoup and I will cook us a tasty stew!");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",3);
    AddTraderTrigger("Auftrag","Bring mir die 15 Tomaten, das Beil und den Eimer, sowie deine 5 Schüsseln selbstgemacher Zwiebelsuppe und ich koch uns einen leckeren Eintopf!");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",3);
    AddTraderTrigger(".+","Endlich bist du wieder da, jetzt aber schnell her mit den Sachen. Schau zu, vielleicht lernst du ja noch dies und das von mir!");
    AddCondition("qpg","=",3);
    AddCondition("item",200,"all",">",14);
    AddCondition("item",2923,"all",">",4);
    AddCondition("item",74,"all",">",1);
    AddCondition("item",51,"all",">",1);
    AddCondition("lang","german");
    AddConsequence("deleteitem",200,15);
    AddConsequence("deleteitem",2923,5);
    AddConsequence("deleteitem",74,1);
    AddConsequence("deleteitem",51,1);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",4);
    AddConsequence("inform","[Quest erfüllt] Du hast das Gefühl als hättest du heute viel gelernt.");
    AddTraderTrigger(".+","You're finally back, now quickly hand me those things. Watch me now, maybe you learn a thing or two from me!");
    AddCondition("qpg","=",3);
    AddCondition("item",200,"all",">",14);
    AddCondition("item",2923,"all",">",4);
    AddCondition("item",74,"all",">",1);
    AddCondition("item",51,"all",">",1);
    AddCondition("lang","english");
    AddConsequence("deleteitem",200,15);
    AddConsequence("deleteitem",2923,5);
    AddConsequence("deleteitem",74,1);
    AddConsequence("deleteitem",51,1);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",4);
    AddConsequence("inform","[Quest finished] You have the feeling that you've learnt a lot today.");
    AddTraderTrigger(".+","So wird das nichts, du musst mir schon die Sachen bringen die ich von dir wollte, ich zähle sie nochmal auf also schreibs auf. 15 Tomaten, ein Beil, einen Eimer und 5 Schüsseln Zwiebelsuppe!");
    AddCondition("qpg","=",3);
    AddCondition("item",200,"all","<",15);
    AddCondition("item",2923,"all","<",5);
    AddCondition("item",74,"all","=",0);
    AddCondition("item",51,"all","=",0);
    AddCondition("lang","german");
    AddTraderTrigger(".+","That's not working, you will have to bring me those things I asked you for, I will tell it as well, better note it down. 15 tomatoes, a hatchet, a bucket and 5 bowls of onionsoup!");
    AddCondition("qpg","=",3);
    AddCondition("item",200,"all","<",15);
    AddCondition("item",2923,"all","<",5);
    AddCondition("item",74,"all","=",0);
    AddCondition("item",51,"all","=",0);
    AddCondition("lang","english");
    -- 3rd quest
    AddTraderTrigger("quest","Ah, you're back so soon. I just wanted to make a cake, please bring me the following things: four peels, a small pouch with 10 hops in it, 10 muffins and the most important thing, five honeycombs.");
    AddCondition("skill","baking",">",40);
    AddCondition("skill","baking","=<",60);
    AddCondition("lang","english");
    AddConsequence("qpg","=",5);
    AddTraderTrigger("quest","So, so, schnell bist du zurück. Ich wollte gerade einen Kuchen backen, bring' mir bitte folgende Sachen: vier Ofenschieber, ein kleinen Beutel mit 10 Hopfen darin, 10 Muffins und das wichtigste nicht zu vergessen, fünf Honigwaben.");
    AddCondition("skill","baking",">",40);
    AddCondition("skill","baking","=<",60);
    AddCondition("lang","german");
    AddConsequence("qpg","=",5);
    AddTraderTrigger("task","Ah, you're back so soon. I just wanted to make a cake, please bring me the following things: four peels, a small pouch with 10 hops in it, 10 muffins and the most important thing, five honeycombs.");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking",">",40);
    AddCondition("skill","baking","=<",60);
    AddConsequence("qpg","=",5);
    AddTraderTrigger("Auftrag","So, so, schnell bist du zurück. Ich wollte gerade einen Kuchen backen, bring' mir bitte folgende Sachen: vier Ofenschieber, ein kleinen Beutel mit 10 Hopfen darin, 10 Muffins und das wichtigste nicht zu vergessen, fünf Honigwaben.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking",">",40);
    AddCondition("skill","baking","=<",60);
    AddConsequence("qpg","=",5);
    AddTraderTrigger("quest","Don't disturbe me now, I'm just working on a new recipe. Come back later.");
    AddCondition("qpg","=",4);
    AddCondition("skill","baking","=<",40);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Störe mich jetzt nicht, ich bastel grad an einem neuen Rezept. Komm später wieder.");
    AddCondition("qpg","=",4);
    AddCondition("skill","baking","=<",40);
    AddCondition("lang","german");
    AddTraderTrigger("task","Don't disturbe me now, I'm just working on a new recipe. Come back later.");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking","=<",40);
    AddCondition("qpg","=",4);
    AddTraderTrigger("Auftrag","Störe mich jetzt nicht, ich bastel grad an einem neuen Rezept. Komm später wieder.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking","=<",40);
    AddCondition("qpg","=",4);
    AddTraderTrigger("quest","4 peels, 10 hops, 10 muffings and 5 honeycombs, I think you will have that in no time.");
    AddCondition("qpg","=",5);
    AddCondition("lang","english");
    AddTraderTrigger("quest","4 Ofenschieber, 10 Hopfen, 10 Muffins und 5 Honigwaben waren es, ich denke mal das hast du im nu zusammen.");
    AddCondition("qpg","=",5);
    AddCondition("lang","german");
    AddTraderTrigger("task","4 peels, 10 hops, 10 muffings and 5 honeycombs, I think you will have that in no time.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",5);
    AddTraderTrigger("Auftrag","4 Ofenschieber, 10 Hopfen, 10 Muffins und 5 Honigwaben waren es, ich denke mal das hast du im nu zusammen.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",5);
    AddTraderTrigger(".+","Da bist du ja wieder und du hast sogar alles dabei, großartig! Nun kannst du mir auch zugucken wie ich den Kuchen backe, das hilft dir sicher weiter!");
    AddCondition("qpg","=",5);
    AddCondition("item",121,"all",">",3);
    AddCondition("item",154,"all",">",9);
    AddCondition("item",454,"all",">",9);
    AddCondition("item",2529,"all",">",4);
    AddCondition("lang","german");
    AddConsequence("deleteitem",121,4);
    AddConsequence("deleteitem",154,10);
    AddConsequence("deleteitem",454,10);
    AddConsequence("deleteitem",2529,5);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",6);
    AddConsequence("inform","[Quest erfüllt] Du hast das Gefühl als hättest du heute viel gelernt.");
    AddTraderTrigger(".+","You're back and you have everything with you, fantastic! Now you can help me with this cake, I'm sure that'll help you!");
    AddCondition("qpg","=",5);
    AddCondition("item",121,"all",">",3);
    AddCondition("item",154,"all",">",9);
    AddCondition("item",454,"all",">",9);
    AddCondition("item",2529,"all",">",4);
    AddCondition("lang","english");
    AddConsequence("deleteitem",121,4);
    AddConsequence("deleteitem",154,10);
    AddConsequence("deleteitem",454,10);
    AddConsequence("deleteitem",2529,5);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",6);
    AddConsequence("inform","[Quest finished] You have the feeling that you've learnt a lot today.");
    AddTraderTrigger(".+","Du hast ja nicht alles was ich wollte wie mir scheint, hol' mir die Sachen doch bitte, dann back ich einen super leckeren Kuchen!");
    AddCondition("qpg","=",5);
    AddCondition("item",121,"all","<",4);
    AddCondition("item",154,"all","<",10);
    AddCondition("item",454,"all","<",10);
    AddCondition("item",2529,"all","<",5);
    AddCondition("lang","german");
    AddTraderTrigger(".+","You don't have everything I asked you for. Get me all those things than I will bake a super tasty cake!");
    AddCondition("qpg","=",5);
    AddCondition("item",121,"all","<",4);
    AddCondition("item",154,"all","<",10);
    AddCondition("item",454,"all","<",10);
    AddCondition("item",2529,"all","<",5);
    AddCondition("lang","english");
    -- 4th quest 
    AddTraderTrigger("quest","I have one recipe for you left but I want to try some of you selfmade dished. I would like to try 15 sausage dishes, one box with 10 cookies, as well as 10 meat dishes and 5 strawberry cakes.");
    AddCondition("skill","baking",">",60);
    AddCondition("skill","baking","=<",80);
    AddCondition("lang","english");
    AddConsequence("qpg","=",7);
    AddTraderTrigger("quest","Ein Rezept habe ich noch für dich, dafür will ich aber von dir einige selbstgemachte Gerichte testen. 15 Teller Würstchen mit Beilage, eine Dose mit 10 Keksen darin, sowie 10 Teller Steak mit Beilage und zu guter letzt 5 Erdbeertorten will ich von dir kosten.");
    AddCondition("skill","baking",">","60s");
    AddCondition("skill","baking","=<",80);
    AddCondition("lang","german");
    AddConsequence("qpg","=",7);
    AddTraderTrigger("task","I have one recipe for you left but I want to try some of you selfmade dished. I would like to try 15 sausage dishes, one box with 10 cookies, as well as 10 meat dishes and 5 strawberry cakes.");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking",">",60);
    AddCondition("skill","baking","=<",80);
    AddConsequence("qpg","=",7);
    AddTraderTrigger("Auftrag","Ein Rezept habe ich noch für dich, dafür will ich aber von dir einige selbstgemachte Gerichte testen. 15 Teller Würstchen mit Beilage, eine Dose mit 10 Keksen darin, sowie 10 Teller Steak mit Beilage und zu guter letzt 5 Erdbeertorten will ich von dir kosten.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking",">",60);
    AddCondition("skill","baking","=<",80);
    AddConsequence("qpg","=",7);
    AddTraderTrigger("quest","Practice your cooking skill a little more, because with practice you get better and if you later ask nicely, I might have another recipe for you.");
    AddCondition("qpg","=",6);
    AddCondition("skill","baking","=<",60);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Übe dich noch etwas im Kochen, denn nur durch Übung wird man besser und wenn du später nett fragst, habe ich vielleicht sogar noch ein Rezept für dich.");
    AddCondition("qpg","=",6);
    AddCondition("skill","baking","=<",60);
    AddCondition("lang","german");
    AddTraderTrigger("task","Practice your cooking skill a little more, because with practice you get better and if you later ask nicely, I might have another recipe for you.");
    AddAdditionalTrigger("adventure");
    AddCondition("skill","baking","=<",60);
    AddCondition("qpg","=",6);
    AddTraderTrigger("Auftrag","Übe dich noch etwas im Kochen, denn nur durch Übung wird man besser und wenn du später nett fragst, habe ich vielleicht sogar noch ein Rezept für dich.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("skill","baking","=<",60);
    AddCondition("qpg","=",6);
    AddTraderTrigger("quest","You should bring me 15 sausage dishes, a box with 10 cookies, 10 steaks and of course the 5 strawberry cakes.");
    AddCondition("qpg","=",7);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Du solltest mir 15 Teller Würstchen mit Beilage, eine Dose mit 10 Keksen, 10 Teller Steak mit Beilage bringen und natürlich die 5 Erdbeertorten nicht zu vergessen.");
    AddCondition("qpg","=",7);
    AddCondition("lang","german");
    AddTraderTrigger("task","You should bring me 15 sausage dishes, a box with 10 cookies, 10 steaks and of course the 5 strawberry cakes.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",7);
    AddTraderTrigger("Auftrag","Du solltest mir 15 Teller Würstchen mit Beilage, eine Dose mit 10 Keksen, 10 Teller Steak mit Beilage bringen und natürlich die 5 Erdbeertorten nicht zu vergessen.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",7);
    AddTraderTrigger(".+","Jam, jam, deine Gerichte schmecken klasse. Aber ein kleiner Tipp noch, ab und an misch ich ein kleines Stück von einem Sibanacblatt in mein Essen, dadurch bekommt es den herlichen Duft.");
    AddCondition("qpg","=",7);
    AddCondition("item",2922,"all",">",14);
    AddCondition("item",453,"all",">",9);
    AddCondition("item",557,"all",">",9);
    AddCondition("item",354,"all",">",4);
    AddCondition("lang","german");
    AddConsequence("deleteitem",2922,15);
    AddConsequence("deleteitem",453,10);
    AddConsequence("deleteitem",557,10);
    AddConsequence("deleteitem",354,5);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",8);
    AddConsequence("inform","[Quest erfüllt] Du hast das Gefühl als hättest du heute viel gelernt.");
    AddTraderTrigger(".+","Mhh..your dishes are tasty. But one small, last tipp, if you mix a small piece of a Sibanac leaf under your dishes it gets this nice smell.");
    AddCondition("qpg","=",7);
    AddCondition("item",2922,"all",">",14);
    AddCondition("item",453,"all",">",9);
    AddCondition("item",557,"all",">",9);
    AddCondition("item",354,"all",">",4);
    AddCondition("lang","english");
    AddConsequence("deleteitem",2922,15);
    AddConsequence("deleteitem",453,10);
    AddConsequence("deleteitem",557,10);
    AddConsequence("deleteitem",354,5);
    AddConsequence("skill","crafting","baking","+",5);
    AddConsequence("qpg","=",8);
    AddConsequence("inform","[Quest finished] You have the feeling that you've learnt a lot today.");
    AddTraderTrigger(".+","Wenn du keinen Wert auf meine Forderung legst, mir ein paar von deinen Gerichten zu bringen, helfe ich dir auch nicht!");
    AddCondition("qpg","=",7);
    AddCondition("item",2922,"all","<",15);
    AddCondition("item",453,"all","<",10);
    AddCondition("item",557,"all","<",10);
    AddCondition("item",354,"all","<",5);
    AddCondition("lang","german");
    AddTraderTrigger(".+","If you don't emphasize my demands, to bring me some of you dishes, I cannoth help you!");
    AddCondition("qpg","=",7);
    AddCondition("item",2922,"all","<",15);
    AddCondition("item",453,"all","<",10);
    AddCondition("item",557,"all","<",10);
    AddCondition("item",354,"all","<",5);
    AddCondition("lang","english");
    -- Final dialogue: No more quests, just nice hints 
    AddTraderTrigger("quest","You're good enough now, there is nothing more I could teach you. If you keep on practicing you might become a master cook!");
    AddCondition("qpg","=",8);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Du bist nun gut genug, es gibt nichts dass ich dir noch beibringen könnte. Strengst du dich noch ein wenig mehr an, wirst du noch ein Meister im kochen!");
    AddCondition("qpg","=",8);
    AddCondition("lang","german");
    AddTraderTrigger("task","You're good enough now, there is nothing more I could teach you. If you keep on practicing you might become a master cook!");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",8);
    AddTraderTrigger("Auftrag","Du bist nun gut genug, es gibt nichts dass ich dir noch beibringen könnte. Strengst du dich noch ein wenig mehr an, wirst du noch ein Meister im kochen!");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",8);
    -- Last catch: Think about keyphrases the player might say and that are not caught until here 
    AddTraderTrigger("Yes","Great, hurry up.");
    AddAdditionalText("Fantastic, now run!");
    AddAdditionalText("Great, but pleace hurry up");
    AddTraderTrigger("Ja","Super, mach schnell.");
    AddAdditionalText("Wunderbar, dann los!");
    AddAdditionalText("Toll, aber beeil dich bitte");
    AddTraderTrigger("No","Maybe you will change your mind?");
    AddAdditionalText("Why not? Aren't you nice?");
    AddAdditionalText("Please, do it for me.");
    AddTraderTrigger("Nein","Vielleicht änderst du deine Meinung noch einmal?");
    AddAdditionalText("Wieso denn nicht, bist du nicht nett?");
    AddAdditionalText("Ach bitte, mach es für mich");
    -- ********* END DYNAMIC PART ********
    TradSpeakLang={0,1};
    TradStdLang=0;

    increaseLangSkill(TradSpeakLang);
    thisNPC.activeLanguage=TradStdLang;

end

function nextCycle()  -- ~10 times per second
    initializeNpc();
    SpeakerCycle();
end

function receiveText(texttype, message, originator)
    if BasicNPCChecks(originator,2) then
        if LangOK(originator,TradSpeakLang) then
            TellSmallTalk(message,originator);
        else
            Confused(
               "#me sieht dich leicht verwirrt an",
               "#me looks at you a little confused"
            );
        end
    end
end
