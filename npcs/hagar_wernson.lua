-- INSERT INTO npc VALUES (nextval('npc_seq'),0,-345,-441,0,4,false,'Hagar Wernson','npc_hagar_wernson.lua',0);

require("npcs.base.autonpcfunctions")
-- require("npcs.base.autonpcfunctions")

function useNPC(user,counter,param)
    thisNPC:increaseSkill(1,"common language",100);
    thisNPC:talkLanguage(CCharacter.say, CPlayer.german, "Finger weg!");
    thisNPC:talkLanguage(CCharacter.say, CPlayer.english, "Don't you touch me!");
end

function initializeNpc()
    if TraderFirst then
        return true;
    end

    InitTalkLists();

    -- ********* START DYNAMIC PART ********

    -- nordmark, in der taverne
    AddTraderTrigger("gr[üue]+[sß]+e","Moin...Langohr");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Gruss");
    AddAdditionalTrigger("Moin");
    AddCondition("race", CCharacter.elf);
    AddCondition("chance",10 );
    AddTraderTrigger("gr[üue]+[sß]+e","Moin...");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Gruss");
    AddAdditionalTrigger("Moin");
    AddCondition("race", CCharacter.elf);
    AddTraderTrigger("greetings","G'day...long-ear");
    AddAdditionalTrigger("hello");
    AddCondition("race", CCharacter.elf);
    AddCondition("chance",15 );
    AddTraderTrigger("greetings","G'day...");
    AddAdditionalTrigger("hello");
    AddCondition("race", CCharacter.elf);
    AddTraderTrigger("gr[üue]+[sß]+e","Sei gegrüßt, holde Maid! Komm näher! Ich wisch auch den Tisch ab.");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Gruss");
    AddAdditionalTrigger("Moin");
    AddCondition("sex","female");
    AddTraderTrigger("greetings","G'day, beautyfull maiden! come here! I'll clean that table.");
    AddAdditionalTrigger("hello");
    AddCondition("sex","female");
    AddTraderTrigger("gr[üue]+[sß]+e","Moin, Moin, %CHARNAME! Komm ran! Hier kannste Dich vollkippen.");
    AddCondition("item",7,"all",">=",1);
    AddCondition("item",333,"all",">=",1);
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Gruss");
    AddAdditionalTrigger("Moin");
    AddTraderTrigger("greetings","G'day, %CHARNAME! Here's yer place! Fill yer up?");
    AddCondition("item",7,"all",">=",1);
    AddCondition("item",333,"all",">=",1);
    AddAdditionalTrigger("hello");
    AddTraderTrigger("gr[üue]+[sß]+e","Moin, seid willkommen in der Drachentränke!");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Gruss");
    AddAdditionalTrigger("Moin");
    AddTraderTrigger("greetings","G'day, be wellcome in the Dragon's Pond!");
    AddAdditionalTrigger("hello");
    AddTraderTrigger("name","Es ist mir ein Vergnügen! Ich bin "..thisNPC.name..", der Wirt.");
    AddCondition("lang","german");
    AddCondition("sex","female");
    AddTraderTrigger("name","What a pleasure! I am "..thisNPC.name..", the innkeeper.");
    AddCondition("lang","english");
    AddCondition("sex","female");
    AddTraderTrigger("name","Ich bin "..thisNPC.name..", der Wirt.");
    AddCondition("lang","german");
    AddTraderTrigger("name","I am "..thisNPC.name..", the innkeeper.");
    AddCondition("lang","english");
    AddTraderTrigger("Was verkauft","Ich hab Jungfernglück, den beliebten Apfelwein, nur sechs Kupfer fürn Kelch. Wär das nix fuer Euch? Oder Gnollgift, den guten Rotwein, nur acht Kupfer. Bärenfalle, den besten Met auch für acht. Und Nordburger Schädelbrecher, unser Bier. Der Krug zu lumpigen acht Kupfer");
    AddCondition("sex","female");
    AddTraderTrigger("Was kauft","Ich kauf Kupferkelche zurück, meine Liebe. Ein'n Kupfer fürn Kelch. Und Bierkruege, auch für'n Kupfer. Für graue Flaschen zahl ich zwei.");
    AddAdditionalTrigger("Was kaufst");
    AddCondition("sex","female");
    AddTraderTrigger("what sell","I got virgen's delight, our applewine, six copper the goblet. Specially for you, my dear. An' Gnollpoison, a red wine, or Beartrap, our meade, both for eight copper the goblet. An' Northburger scullcracker, our beer, for eight copper the mug.");
    AddCondition("sex","female");
    AddTraderTrigger("what do buy","I buy back the empty mugs and coppergoblets, my dear. For a copper each. And grey bottles, for two copper each.");
    AddCondition("sex","female");
    AddTraderTrigger("Was verkauft","Ich hab Jungfernglück, den beliebten Apfelwein, nur sechs Kupfer fürn Kelch. Oder Gnollgift, den guten Rotwein, nur acht Kupfer. Bärenfalle, den besten Met auch für acht. Und Nordburger Schädelbrecher, unser Bier. Der Krug  zu lumpigen acht Kupfer");
    AddTraderTrigger("Was kauft","Ich kauf Kupferkelche zurück. Ein'n Kupfer fürn Kelch. Und Bierkruege, auch für'n Kupfer. Für graue Flaschen zahl ich zwei.");
    AddAdditionalTrigger("Was kaufst");
    AddTraderTrigger("what sell","I got virgen's delight, our applewine, six copper the goblet. An' Gnollpoison, a red wine, or Beartrap,  our meade, both for eight copper the goblet. An' Northburger scullcracker, our beer, for eight copper the mug.");
    AddTraderTrigger("what do buy","I buy back the empty mugs and coppergoblets. For a copper each. And grey bottles, for two copper each.");
    AddTraderTrigger("buy milk","Here is no monastery! get lost!");
    AddTraderTrigger("milch kauf","Hier iss doch kein Kloster! Verschwinde!");
    AddAdditionalTrigger("kauf milch");
    AddTraderTrigger("buy water","ye can water yer cow outside! this ain't no stable here!");
    AddTraderTrigger("wasser kauf","Deine Kuh kannst du draussen tränken! Dies iss doch kein Stall!");
    AddAdditionalTrigger("kauf wasser");
    AddTraderTrigger("buy a virgen's delight","Bugger off! We don't like beggars without money here!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a cyder");
    AddCondition("money","<",6);
    AddTraderTrigger("buy a virgen's delight","My dear, I cain't give yer a drink without money.");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a cyder");
    AddCondition("money","<",6);
    AddTraderTrigger("buy a virgen's delight","Yer 'ave not enuff money, come back, when yer can pay.");
    AddAdditionalTrigger("buy a cyder");
    AddCondition("money","<",6);
    AddTraderTrigger("buy a virgen's delight","Yer cyder. Gimme six copper.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a cyder");
    AddConsequence("money","-",6);
    AddConsequence("item",1844,1,333,0);
    AddTraderTrigger("buy a virgen's delight","Here yer got it. Virgen's delight for the gracious maid!");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a cyder");
    AddConsequence("money","-",6);
    AddConsequence("item",1844,1,333,0);
    AddTraderTrigger("buy a virgen's delight","Here yer got it. drink, before the goblet gets rusty!");
    AddAdditionalTrigger("buy a cyder");
    AddConsequence("money","-",6);
    AddConsequence("item",1844,1,333,0);
    AddTraderTrigger("ein Apfelmost kauf","Mach das Du rauskommst! nich' bloss'n Elf, nee, auch noch'n Bettler! Also so was!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein Apfelwein kauf");
    AddAdditionalTrigger("ein Cider kauf");
    AddAdditionalTrigger("ein Jungferngl[üue]+ck kauf");
    AddCondition("money","<",6);
    AddTraderTrigger("ein Apfelmost kauf","Ohne Kupfer kriegt selbst so'n hübsches Ding wie Du hier nix zu trinken!");
    AddCondition("sex","female");
    AddAdditionalTrigger("ein Apfelwein kauf");
    AddAdditionalTrigger("ein Cider kauf");
    AddAdditionalTrigger("ein Jungferngl[üue]+ck kauf");
    AddCondition("money","<",6);
    AddTraderTrigger("ein Apfelmost kauf","Ohne Moos nix los! Komm wieder, wenn Du Geld hast!");
    AddAdditionalTrigger("ein Apfelwein kauf");
    AddAdditionalTrigger("ein Cider kauf");
    AddAdditionalTrigger("ein Jungferngl[üue]+ck kauf");
    AddCondition("money","<",6);
    AddTraderTrigger("ein Apfelmost kauf","Ein Apfelwein. Sechs Kupfer.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein Apfelwein kauf");
    AddAdditionalTrigger("ein Cider kauf");
    AddAdditionalTrigger("ein Jungferngl[üue]+ck kauf");
    AddConsequence("money","-",6);
    AddConsequence("item",1844,1,333,0);
    AddTraderTrigger("ein Apfelmost kauf","Jungfernglück gestellt, vor die Dame hier von Welt!");
    AddCondition("sex","female");
    AddAdditionalTrigger("ein Apfelwein kauf");
    AddAdditionalTrigger("ein Cider kauf");
    AddAdditionalTrigger("ein Jungferngl[üue]+ck kauf");
    AddConsequence("money","-",6);
    AddConsequence("item",1844,1,333,0);
    AddTraderTrigger("ein Apfelmost kauf","Hier hast Du. Trink, bevor der Kelch rostet!");
    AddAdditionalTrigger("ein Apfelwein kauf");
    AddAdditionalTrigger("ein Cider kauf");
    AddAdditionalTrigger("ein Jungferngl[üue]+ck kauf");
    AddConsequence("money","-",6);
    AddConsequence("item",1844,1,333,0);
    AddTraderTrigger("buy %NUMBER cyder","Wanna get more'n yer can pay, long-ear?  That ain't enuff money!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy %NUMBER virgen's delight");
    AddCondition("money","<",function( a ) return a*6; end);
    AddTraderTrigger("buy %NUMBER cyder","That ain't enuff money, my dear, why don't yer take less?");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy %NUMBER virgen's delight");
    AddCondition("money","<",function( a ) return a*6; end);
    AddTraderTrigger("buy %NUMBER cyder","That ain't enuff money!");
    AddAdditionalTrigger("buy %NUMBER virgen's delight");
    AddCondition("money","<",function( a ) return a*6; end);
    AddTraderTrigger("buy %NUMBER cyder","Here are your %NUMBER cyder!");
    AddAdditionalTrigger("buy %NUMBER virgen's delight");
    AddCondition("money",">=",function( a ) return a*6; end);
    AddConsequence("money","-",function( a ) return a*6; end);
    AddConsequence("item",1844,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER Cider kauf","Na? Willst mehr saufen, als Du zahlen kannst, Langohr? Datt is nich genug Kupfer!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("%NUMBER Apfelmost kauf");
    AddAdditionalTrigger("%NUMBER Apfelwein kauf");
    AddAdditionalTrigger("%NUMBER Jungferngl[üue]+ck kauf");
    AddCondition("money","<",function( a ) return a*6; end);
    AddTraderTrigger("%NUMBER Cider kauf","Datt is nich genug Kupfer, meine Liebe. Nimm doch weniger.");
    AddCondition("sex","female");
    AddAdditionalTrigger("%NUMBER Apfelmost kauf");
    AddAdditionalTrigger("%NUMBER Apfelwein kauf");
    AddAdditionalTrigger("%NUMBER Jungferngl[üue]+ck kauf");
    AddCondition("money","<",function( a ) return a*6; end);
    AddTraderTrigger("%NUMBER Cider kauf","Datt is nich genug Kupfer!");
    AddAdditionalTrigger("%NUMBER Apfelmost kauf");
    AddAdditionalTrigger("%NUMBER Apfelwein kauf");
    AddAdditionalTrigger("%NUMBER Jungferngl[üue]+ck kauf");
    AddCondition("money","<",function( a ) return a*6; end);
    AddTraderTrigger("%NUMBER Cider kauf","Hier hast du deine %NUMBER Apfelwein!");
    AddAdditionalTrigger("%NUMBER Apfelmost kauf");
    AddAdditionalTrigger("%NUMBER Apfelwein kauf");
    AddAdditionalTrigger("%NUMBER Jungferngl[üue]+ck kauf");
    AddCondition("money",">=",function( a ) return a*6; end);
    AddConsequence("money","-",function( a ) return a*6; end);
    AddConsequence("item",1844,"%NUMBER",333,0);
    AddTraderTrigger("buy a beer","Bugger off! We don't like beggars without money here!");
    AddCondition("money","<",8);
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a scullcracker");
    AddTraderTrigger("buy a beer","My dear, I cain't give yer a drink without money.");
    AddCondition("money","<",8);
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a scullcracker");
    AddTraderTrigger("buy a beer","Yer 'ave not enuff money, come back, when yer can pay.");
    AddCondition("money","<",8);
    AddAdditionalTrigger("buy a scullcracker");
    AddTraderTrigger("buy a beer","Yer beer. Gimme eight copper.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a scullcracker");
    AddConsequence("money","-",8);
    AddConsequence("item",1909,1,333,0);
    AddTraderTrigger("buy a beer","Here yer got it. a scullcracker for the daring gal! that'll give yer more headaches than a husband!");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a scullcracker");
    AddConsequence("money","-",8);
    AddConsequence("item",1909,1,333,0);
    AddTraderTrigger("buy a beer","Here yer got it. drink, before it cools down!");
    AddAdditionalTrigger("buy a scullcracker");
    AddConsequence("money","-",8);
    AddConsequence("item",1909,1,333,0);
    AddTraderTrigger("ein bier kauf","Mach das Du rauskommst! nich' bloss'n Elf, nee, auch noch'n Bettler! Also so was!");
    AddCondition("money","<",8);
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein sch[äae]+delbrecher kauf");
    AddTraderTrigger("ein bier kauf","Ohne Kupfer kriegt selbst so'n hübsches Ding wie Du hier nix zu trinken!");
    AddCondition("money","<",8);
    AddCondition("sex","female");
    AddAdditionalTrigger("ein sch[äae]+delbrecher kauf");
    AddTraderTrigger("ein bier kauf","Ohne Kohle kein Bier! Komm wieder, wenn Du Geld hast!");
    AddCondition("money","<",8);
    AddAdditionalTrigger("ein sch[äae]+delbrecher kauf");
    AddTraderTrigger("ein bier kauf","Ein Bier. Acht Kupfer.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein sch[äae]+delbrecher kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1909,1,333,0);
    AddTraderTrigger("ein bier kauf","Den Schädelbrecher der Herzensbrecherin!");
    AddCondition("sex","female");
    AddAdditionalTrigger("ein sch[äae]+delbrecher kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1909,1,333,0);
    AddTraderTrigger("ein bier kauf","Hier hast es. Trink, bevor es kalt wird!");
    AddAdditionalTrigger("ein sch[äae]+delbrecher kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1909,1,333,0);
    AddTraderTrigger("buy %NUMBER beer","Wanna get more'n yer can pay, long-ear?  That ain't enuff money!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy %NUMBER scullcracker");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER beer","That ain't enuff money, my dear, why don't yer take less?");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy %NUMBER scullcracker");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER beer","That ain't enuff money!");
    AddAdditionalTrigger("buy %NUMBER scullcracker");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER beer","Here are your %NUMBER beer!");
    AddAdditionalTrigger("buy %NUMBER scullcracker");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",1909,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER Bier kauf","Na? Willst mehr saufen, als Du zahlen kannst, Langohr? Datt is nich genug Kupfer!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("%NUMBER sch[äae]+delbrecher kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER bier kauf","Datt is nich genug Kupfer, meine Liebe. Nimm doch weniger.");
    AddCondition("sex","female");
    AddAdditionalTrigger("%NUMBER sch[äae]+delbrecher kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER bier kauf","Datt is nich genug Kupfer!");
    AddAdditionalTrigger("%NUMBER sch[äae]+delbrecher kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER bier kauf","Hier hast du deine %NUMBER Bier!");
    AddAdditionalTrigger("%NUMBER sch[äae]+delbrecher kauf");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",1909,"%NUMBER",333,0);
    AddTraderTrigger("buy a wine","Bugger off! We don't like beggars without money here!");
    AddCondition("money","<",8);
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a gnollpoison");
    AddTraderTrigger("buy a wine","My dear, I cain't give yer a drink without money.");
    AddCondition("money","<",8);
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a gnollpoison");
    AddTraderTrigger("buy a wine","Yer 'ave not enuff money, come back, when yer can pay.");
    AddCondition("money","<",8);
    AddAdditionalTrigger("buy a gnollpoison");
    AddTraderTrigger("buy a wine","Yer wine. Gimme eight copper.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a gnollpoison");
    AddConsequence("money","-",8);
    AddConsequence("item",1842,1,333,0);
    AddTraderTrigger("buy a wine","Here yer got it. Gnollpoison for the beauty! that's good for yer skin!");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a gnollpoison");
    AddConsequence("money","-",8);
    AddConsequence("item",1842,1,333,0);
    AddTraderTrigger("buy a wine","Here yer got it. drink, before the gnolls come for it!");
    AddAdditionalTrigger("buy a gnollpoison");
    AddConsequence("money","-",8);
    AddConsequence("item",1842,1,333,0);
    AddTraderTrigger("ein Wein kauf","Mach das Du rauskommst! nich' bloss'n Elf, nee, auch noch'n Bettler! Also so was!");
    AddCondition("money","<",8);
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein Gnollgift kauf");
    AddTraderTrigger("ein Wein kauf","Ohne Kupfer kriegt selbst so'n strammes Weib wie Du hier nix zu trinken!");
    AddCondition("money","<",8);
    AddCondition("sex","female");
    AddAdditionalTrigger("ein Gnollgift kauf");
    AddTraderTrigger("ein Wein kauf","Ohne Kupfer keinen Wein! Komm wieder, wenn Du Geld hast!");
    AddCondition("money","<",8);
    AddAdditionalTrigger("ein Gnollgift kauf");
    AddTraderTrigger("ein Wein kauf","Ein Wein. Acht Kupfer.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein Gnollgift kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1842,1,333,0);
    AddTraderTrigger("ein Wein kauf","Das Gnollgift für die Hübsche! Der iss gut für die Haut.");
    AddCondition("sex","female");
    AddAdditionalTrigger("ein Gnollgift kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1842,1,333,0);
    AddTraderTrigger("ein Wein kauf","Hier hast ihn. Trink, wenn Du kein Gnoll bist!");
    AddAdditionalTrigger("ein Gnollgift kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1842,1,333,0);
    AddTraderTrigger("buy %NUMBER wine","Wanna get more'n yer can pay, long-ear?  That ain't enuff money!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy %NUMBER gnollpoison");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER wine","That ain't enuff money, my dear, why don't yer take less?");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy %NUMBER gnollpoison");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER wine","That ain't enuff money!");
    AddAdditionalTrigger("buy %NUMBER gnollpoison");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER wine","Here are your %NUMBER wine!");
    AddAdditionalTrigger("buy %NUMBER gnollpoison");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",1842,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER Wein kauf","Na? Willst mehr saufen, als Du zahlen kannst, Langohr? Datt is nich genug Kupfer!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("%NUMBER Gnollgift kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER Wein kauf","Datt is nich genug Kupfer, meine Teuerste. Nimm doch weniger.");
    AddCondition("sex","female");
    AddAdditionalTrigger("%NUMBER Gnollgift kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER Wein kauf","Datt is nich genug Kupfer!");
    AddAdditionalTrigger("%NUMBER Gnollgift kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER Wein kauf","Hier hast du deine %NUMBER Weine!");
    AddAdditionalTrigger("%NUMBER Gnollgift kauf");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",1842,"%NUMBER",333,0);
    AddTraderTrigger("buy a meade","Bugger off! We don't like beggars without money here!");
    AddCondition("money","<",8);
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a beartrap");
    AddTraderTrigger("buy a meade","Honey, I cain't give yer a drink without money.");
    AddCondition("money","<",8);
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a beartrap");
    AddTraderTrigger("buy a meade","Yer 'ave not enuff money, come back, when yer can pay.");
    AddCondition("money","<",8);
    AddAdditionalTrigger("buy a beartrap");
    AddTraderTrigger("buy a meade","Yer meade. Eight copper.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy a beartrap");
    AddConsequence("money","-",8);
    AddConsequence("item",1843,1,333,0);
    AddTraderTrigger("buy a meade","Here it is. As sweet, as ye are!");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy a beartrap");
    AddConsequence("money","-",8);
    AddConsequence("item",1843,1,333,0);
    AddTraderTrigger("buy a meade","Here yer meade. Sweet, sticky ann' strong!");
    AddAdditionalTrigger("buy a beartrap");
    AddConsequence("money","-",8);
    AddConsequence("item",1843,1,333,0);
    AddTraderTrigger("ein Met kauf","Mach das Du rauskommst! nich' bloss'n Elf, nee, auch noch'n Bettler! Also so was!");
    AddCondition("money","<",8);
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein B[äae]+renfalle kauf");
    AddTraderTrigger("ein Met kauf","Ohne Kupfer kriegt nich ma' so'n süßes Mädel wie Du hier watt zu trinken!");
    AddCondition("money","<",8);
    AddCondition("sex","female");
    AddAdditionalTrigger("ein B[äae]+renfalle kauf");
    AddTraderTrigger("ein Met kauf","Ohne Kupfer keinen Met! Komm wieder, wenn Du Dir das Saufen leisten kannst!");
    AddCondition("money","<",8);
    AddAdditionalTrigger("ein B[äae]+renfalle kauf");
    AddTraderTrigger("ein Met kauf","Ein Met. Acht Kupfer.");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("ein B[äae]+renfalle kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1843,1,333,0);
    AddTraderTrigger("ein Met kauf","Ein Met für die Holde! Der iss fast so süss, wie Du!");
    AddCondition("sex","female");
    AddAdditionalTrigger("ein B[äae]+renfalle kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1843,1,333,0);
    AddTraderTrigger("ein Met kauf","Hier hast ihn. Kipp weg, eh die Fliegen dran kleben!");
    AddAdditionalTrigger("ein B[äae]+renfalle kauf");
    AddConsequence("money","-",8);
    AddConsequence("item",1843,1,333,0);
    AddTraderTrigger("buy %NUMBER beartrap","Wanna get more'n yer can pay, long-ear?  That ain't enuff money!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("buy %NUMBER meade");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER beartrap","That ain't enuff money, my beauty, why don't yer take less?");
    AddCondition("sex","female");
    AddAdditionalTrigger("buy %NUMBER meade");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER beartrap","That ain't enuff money!");
    AddAdditionalTrigger("buy %NUMBER meade");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("buy %NUMBER beartrap","Here are your %NUMBER meade!");
    AddAdditionalTrigger("buy %NUMBER meade");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",1843,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER Met kauf","Na? Willst nich alles zahlen,watt Du saufen willst, Langohr? Datt is nich genug Kupfer!");
    AddCondition("race", CCharacter.elf);
    AddAdditionalTrigger("%NUMBER B[äae]+renfalle kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER Met kauf","Datt Kupfer reicht nich, meine Süsse. Nimm doch weniger.");
    AddCondition("sex","female");
    AddAdditionalTrigger("%NUMBER B[äae]+renfalle kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER Met kauf","Datt is zu wenig Kupfer!");
    AddAdditionalTrigger("%NUMBER B[äae]+renfalle kauf");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER Met kauf","Hier hast du deine %NUMBER Met!");
    AddAdditionalTrigger("%NUMBER B[äae]+renfalle kauf");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",1843,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER goblet sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER goblet");
    AddCondition("item",1840,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER goblet sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER goblet");
    AddCondition("item",1840,"all",">=","%NUMBER");
    AddConsequence("money","+","%NUMBER");
    AddConsequence("deleteitem",1840,"%NUMBER");
    AddTraderTrigger("%NUMBER mug sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER mug");
    AddCondition("item",1908,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER mug sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER mug");
    AddCondition("item",1908,"all",">=","%NUMBER");
    AddConsequence("money","+","%NUMBER");
    AddConsequence("deleteitem",1908,"%NUMBER");
    AddTraderTrigger("%NUMBER kelch verkauf","Datt sind weniger!");
    AddAdditionalTrigger("verkauf %NUMBER kelch");
    AddCondition("item",1840,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER kelch verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER kelch");
    AddCondition("item",1840,"all",">=","%NUMBER");
    AddConsequence("money","+","%NUMBER");
    AddConsequence("deleteitem",1840,"%NUMBER");
    AddTraderTrigger("%NUMBER krug verkauf","Datt sind weniger!");
    AddAdditionalTrigger("verkauf %NUMBER krug");
    AddCondition("item",1908,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER krug verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER krug");
    AddCondition("item",1908,"all",">=","%NUMBER");
    AddConsequence("money","+","%NUMBER");
    AddConsequence("deleteitem",1908,"%NUMBER");
    AddTraderTrigger("%NUMBER grey bottle sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER grey bottle");
    AddCondition("item",2498,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER grey bottle sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER grey bottle");
    AddCondition("item",2498,"all",">=","%NUMBER");
    AddConsequence("money","+",function( a ) return a*2; end);
    AddConsequence("deleteitem",2498,"%NUMBER");
    AddTraderTrigger("%NUMBER grey bottle buy","That ain't enuff money!");
    AddAdditionalTrigger("buy %NUMBER grey bottle");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER grey bottle buy","I ain't got so many!");
    AddAdditionalTrigger("buy %NUMBER grey bottle");
    AddCondition("number",">",10);
    AddTraderTrigger("%NUMBER grey bottle buy","Here ye got yer %NUMBER bottles!");
    AddAdditionalTrigger("buy %NUMBER grey bottle");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",2498,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER grau flasche verkauf","Datt sind weniger!");
    AddAdditionalTrigger("verkauf %NUMBER grau flasche");
    AddCondition("item",2498,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER grau flasche verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER grau flasche");
    AddCondition("item",2498,"all","<","%NUMBER");
    AddConsequence("money","+","%NUMBER");
    AddConsequence("deleteitem",2498,"%NUMBER");
    AddTraderTrigger("%NUMBER grau flasche kauf","Datt kost' mehr!");
    AddAdditionalTrigger("kauf %NUMBER grau flasche");
    AddCondition("money","<",function( a ) return a*8; end);
    AddTraderTrigger("%NUMBER grau flasche kauf","So viel hab ich nich!");
    AddAdditionalTrigger("kauf %NUMBER grau flasche");
    AddCondition("number",">",10);
    AddTraderTrigger("%NUMBER grau flasche kauf","Hier hast du deine %NUMBER Flaschen!");
    AddAdditionalTrigger("kauf %NUMBER grau flasche");
    AddCondition("money",">=",function( a ) return a*8; end);
    AddConsequence("money","-",function( a ) return a*8; end);
    AddConsequence("item",2498,"%NUMBER",333,0);
    AddTraderTrigger("%NUMBER green bottle sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER green bottle");
    AddCondition("item",2499,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER green bottle sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER green bottle");
    AddCondition("item",2499,"all",">=","%NUMBER");
    AddConsequence("money","+",function( a ) return a*9; end);
    AddConsequence("deleteitem",2499,"%NUMBER");
    AddTraderTrigger("%NUMBER black bottle sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER black bottle");
    AddCondition("item",2501,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER black bottle sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER black bottle");
    AddCondition("item",2501,"all",">=","%NUMBER");
    AddConsequence("money","+",function( a ) return a*10; end);
    AddConsequence("deleteitem",2501,"%NUMBER");
    AddTraderTrigger("%NUMBER red bottle sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER red bottle");
    AddCondition("item",2500,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER red bottle sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER red bottle");
    AddCondition("item",2500,"all","<","%NUMBER");
    AddConsequence("money","+",function( a ) return a*11; end);
    AddConsequence("deleteitem",2500,"%NUMBER");
    AddTraderTrigger("%NUMBER orange bottle sale","That ain't so many!");
    AddAdditionalTrigger("sell %NUMBER orange bottle");
    AddCondition("item",2497,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER orange bottle sale","Here's yer money!");
    AddAdditionalTrigger("sell %NUMBER orange bottle");
    AddCondition("item",2497,"all",">=","%NUMBER");
    AddConsequence("money","+",function( a ) return a*12; end);
    AddConsequence("deleteitem",2497,"%NUMBER");
    AddTraderTrigger("%NUMBER gruen flasche verkauf","Du hast ja garnich so viel!");
    AddAdditionalTrigger("verkauf %NUMBER gruen flasche");
    AddCondition("item",2499,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER gruen flasche verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER gruen flasche");
    AddCondition("item",2499,"all","<","%NUMBER");
    AddConsequence("money","+",function( a ) return a*9; end);
    AddConsequence("deleteitem",2499,"%NUMBER");
    AddTraderTrigger("%NUMBER schwarz flasche verkauf","Du hast ja garnich so viel!");
    AddAdditionalTrigger("verkauf %NUMBER schwarz flasche");
    AddCondition("item",2501,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER schwarz flasche verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER schwarz flasche");
    AddCondition("item",2501,"all",">=","%NUMBER");
    AddConsequence("money","+",function( a ) return a*10; end);
    AddConsequence("deleteitem",2501,"%NUMBER");
    AddTraderTrigger("%NUMBER rot flasche verkauf","Du hast ja garnich so viel!");
    AddAdditionalTrigger("verkauf %NUMBER rot flasche");
    AddCondition("item",2500,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER rot flasche verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER rot flasche");
    AddCondition("item",2500,"all",">=","%NUMBER");
    AddConsequence("money","+",function( a ) return a*11; end);
    AddConsequence("deleteitem",2500,"%NUMBER");
    AddTraderTrigger("%NUMBER orange flasche verkauf","Du hast ja garnich so viel!");
    AddAdditionalTrigger("verkauf %NUMBER orange flasche");
    AddCondition("item",2497,"all","<","%NUMBER");
    AddTraderTrigger("%NUMBER orange flasche verkauf","Hier is datt Geld!");
    AddAdditionalTrigger("verkauf %NUMBER orange flasche");
    AddCondition("item",2497,"all","<","%NUMBER");
    AddConsequence("money","+",function( a ) return a*12; end);
    AddConsequence("deleteitem",2497,"%NUMBER");
    AddTraderTrigger(" sale","I don't buy that!");
    AddAdditionalTrigger("sell ");
    AddTraderTrigger(" buy","I don't sell that!");
    AddAdditionalTrigger("buy ");
    AddTraderTrigger(" verkauf","Das kauf ich nicht!");
    AddAdditionalTrigger("verkauf ");
    AddTraderTrigger(" kauf","So was verkauf ich nicht!");
    AddAdditionalTrigger("kauf ");
    AddTraderTrigger("auf bald","Bis bald! Und lass dir nich auffe Hände treten...");
    AddAdditionalTrigger("bis bald");
    AddAdditionalTrigger("tschüss");
    AddTraderTrigger("farewell","Be well! An' carefull, that no one steps on yer hands...");
    AddAdditionalTrigger("bye");
    AddAdditionalTrigger("good day");
    AddCycleText("wir laaagen vor Sor-Ann-Araah... und hatten 'nen Elf ahan Bord....  In den Kesseln da faulte das Wassah...  da soffen wir Bier soohofort... ","Blow wi-ind, blow... to Salkamar we go.... her hair was blond her eyes were blue... her lips were red, her axe was new... ter my hodae, ter my hodae, ter my hodae, hodae ho!");
    AddCycleText("#me verwischt den Dreck auf dem Tisch","#me wipes in the dirt on the table");
    AddCycleText("#me steht in einer Wolke übler Gerüche","#me stands in a cloud of bad smells");
    AddCycleText("#me trocknet einen Krug mit einem Drecklappen","#me dries a mug with a dirty rag");
    AddCycleText("#me klaubt sich Krümel aus dem Bart","#me picks crumbs out of his beard");
    AddCycleText("#me pustet den Staub aus einem Bierkrug","#me blows dust out of a mug");
    AddCycleText("#me reisst sich Haare aus der Nase","#me picks hair out of his nose");
    AddCycleText("Von den blauen Wellen kommen wir!... unser Käpt'n iss so blöd wie wir!... an den Rudern unsrer Boote, krieg'n wir Blasen anner Pfote.... von den blauen Wellen kommen wir!...","oh beat the drum slowly, an' play the flute only, as they carry me along... cause I'm a young pirate, an' I surely done wrong...");
    AddCycleText("#me riecht nach vergammeltem Fleisch und feuchtem Schafsfell","#me smells of putrefied meat and wet sheepskin");
    AddCycleText("#me kratzt sich abwesend unterm Kilt","#me scratches himself below his kilt absently");
    AddCycleText("#me sieht sich gelangweilt um","#me looks around bored");
    AddCycleText("#me trocknet sich mit dem Geschirrtuch unter den Achseln","#me dries his armpits with the dishrag");
    AddCycleText("#me's Atem riecht nach schalem Bier","#me's breath smells of stale beer");
    -- dank an Dariya fuer einige eklige ideen
    -- von kormkormsen fuer Illarion 
    -- ********* END DYNAMIC PART ********
    TradSpeakLang={0,1};
    TradStdLang=0;

    increaseLangSkill(TradSpeakLang);
    thisNPC.activeLanguage=TradStdLang;

end

function nextCycle()  -- ~10 times per second
    initializeNpc();
    SpeakerCycle();
end

function receiveText(texttype, message, originator)
    if BasicNPCChecks(originator,2) then
        if LangOK(originator,TradSpeakLang) then
            TellSmallTalk(message,originator);
        else
            Confused(
               "#me sieht dich leicht verwirrt an",
               "#me looks at you a little confused"
            );
        end
    end
end