-- INSERT INTO npc VALUES (nextval('npc_seq'),5,-130,-400,0,4,false,'Zerarisa','npc_zerarisa.lua',1);

require("npcs.base.autonpcfunctions")

function useNPC(user,counter,param)
    thisNPC:increaseSkill(1,"common language",100);
    thisNPC:talkLanguage(CCharacter.say, CPlayer.german, "Finger weg!");
    thisNPC:talkLanguage(CCharacter.say, CPlayer.english, "Don't you touch me!");
end

function initializeNpc()
    if TraderFirst then
        return true;
    end

    InitTalkLists();

    -- ********* START DYNAMIC PART ********

    QuestID = 71;
    -- NPC by Hadrian "The Llama Guy" Abela, revised and translated by Estralis Seborian
    -- Queststatus Overview
    -- 0: No Quest taken
    -- 1: Quest 1 taken - gather 10 raw materials for 50cp
    -- 2: Quest 1 solved
    -- 3: Quest 2 taken - gather 20 raw materials for 100cp
    -- 4: Quest 2 solved
    -- 5: Quest 3 taken - gather 5 rare raw materials for 100cp
    -- 6: Quest 3 solved
    -- 7: Quest 4 taken - gather 10 distant raw materials for 200cp
    -- 8: Quest 4 solved
    -- Debugging
    AddTraderTrigger("set 0","Quest status set to 0");
    AddConsequence("qpg","=",0);
    AddTraderTrigger("set 1","Quest status set to 1");
    AddConsequence("qpg","=",1);
    AddTraderTrigger("set 2","Quest status set to 2");
    AddConsequence("qpg","=",2);
    AddTraderTrigger("set 3","Quest status set to 3");
    AddConsequence("qpg","=",3);
    AddTraderTrigger("set 4","Quest status set to 4");
    AddConsequence("qpg","=",4);
    AddTraderTrigger("set 5","Quest status set to 5");
    AddConsequence("qpg","=",5);
    AddTraderTrigger("set 6","Quest status set to 6");
    AddConsequence("qpg","=",6);
    AddTraderTrigger("set 7","Quest status set to 7");
    AddConsequence("qpg","=",7);
    AddTraderTrigger("set 8","Quest status set to 8");
    AddConsequence("qpg","=",8);
    -- Help
    AddTraderTrigger("Help","");
    AddConsequence("inform","[Game Help] This NPC is the fisherwoman Zerarisa. Keyphrases: Hello, quest, rod, fisher.");
    AddTraderTrigger("Hilfe","");
    AddConsequence("inform","[Spielhilfe] Dieser NPC ist die Fischerin Zerarisa. Schlüsselwörter: Hallo, Quest, Angelrute, Fischer.");
    -- General speech
    AddTraderTrigger("Hello","Greetingsss to you.");
    AddAdditionalTrigger("Greetings");
    AddAdditionalTrigger("Be greeted");
    AddAdditionalTrigger("Hail");
    AddAdditionalTrigger("Good day");
    AddAdditionalTrigger("Good morning");
    AddAdditionalTrigger("Good evening");
    AddAdditionalText("Yess, greetingss.");
    AddAdditionalText("Blessingss of Mother upon you, greetingss.");
    AddTraderTrigger("Grüße","Grüßsse dir.");
    AddAdditionalTrigger("Gruß");
    AddAdditionalTrigger("Seid gegrüßt");
    AddAdditionalTrigger("Guten Tag");
    AddAdditionalTrigger("Guten Abend");
    AddAdditionalTrigger("Mahlzeit");
    AddAdditionalTrigger("Tach");
    AddAdditionalTrigger("Moin");
    AddAdditionalText("Ja, Grüßsse.");
    AddAdditionalText("Grüßsse.");
    AddTraderTrigger("Hiho","Greetingsss to you.");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Hey");
    AddAdditionalTrigger("Greebas");
    AddAdditionalTrigger("Greebs");
    AddCondition("lang","english");
    AddAdditionalText("Yess, greetingss.");
    AddAdditionalText("Greetsss.");
    AddTraderTrigger("Hiho","Grüßsse dir.");
    AddAdditionalTrigger("Hallo");
    AddAdditionalTrigger("Hey");
    AddAdditionalTrigger("Greebas");
    AddAdditionalTrigger("Greebs");
    AddCondition("lang","german");
    AddAdditionalText("Ja, Grüßsse.");
    AddAdditionalText("Grüßsse.");
    AddTraderTrigger("Farewell","May the rainsss be heavy and frequent.");
    AddAdditionalTrigger("Good bye");
    AddAdditionalTrigger("Bye");
    AddAdditionalTrigger("Fare thy well");
    AddAdditionalText("May the ssea-Mother watch your path.");
    AddAdditionalText("Farewell, zsss.");
    AddTraderTrigger("Tschüß","Mögenss Regen häufig und ssstark sssein.");
    AddAdditionalTrigger("Tschüss");
    AddAdditionalTrigger("Wiedersehen");
    AddAdditionalTrigger("Gehabt euch wohl");
    AddAdditionalText("Mögenss die Meermutter dein Pfad leitenss.");
    AddAdditionalText("Abschied, zsss.");
    AddTraderTrigger("Ciao","Goodbye");
    AddAdditionalTrigger("Adieu");
    AddAdditionalTrigger("Au revoir");
    AddCondition("lang","english");
    AddAdditionalText("Farewell");
    AddAdditionalText("#me nods slowly: 'Goodbye'.");
    AddTraderTrigger("Ciao","Gut wiedersehensss.");
    AddAdditionalTrigger("Adieu");
    AddAdditionalTrigger("Au revoir");
    AddCondition("lang","german");
    AddAdditionalText("Abschied.");
    AddAdditionalText("#me nickt langsam: 'Gut wiedersehensss'.");
    AddTraderTrigger("How are you","Zerarisa iss fine, yess, but her paw hurtsss.");
    AddAdditionalTrigger("How feel");
    AddAdditionalTrigger("How do you do");
    AddTraderTrigger("Wie geht","Zerarisa issst gut, ja, aber Krallensss ssschmerzensss.");
    AddAdditionalTrigger("Wie fühlst");
    AddAdditionalTrigger("Wie ist es ergangen");
    AddTraderTrigger("your name","I be Zerarisa, would you like to do a job for me?");
    AddAdditionalTrigger("who are you");
    AddAdditionalTrigger("who art thou");
    AddTraderTrigger("dein name","Ich sindss Zerarisa, machenss du Aufgabe für michss?");
    AddAdditionalTrigger("wer bist du");
    AddAdditionalTrigger("wer seid ihr");
    AddAdditionalTrigger("wie heißt");
    -- Catching typical NPC phrases
    AddTraderTrigger("what sell","I ssell nothingss, I am not a merchant.");
    AddAdditionalTrigger("what buy");
    AddAdditionalTrigger("list wares");
    AddAdditionalTrigger("price of");
    AddTraderTrigger("was verkauf","Ich kaufenss nichtss, nichtss bin Handelsssfrau.");
    AddAdditionalTrigger("was kauf");
    AddAdditionalTrigger("warenliste");
    AddAdditionalTrigger("preis von");
    AddTraderTrigger("tell something","If you're interessted in a job, assk.");
    AddTraderTrigger("erzähl was","Habenss Lust auf Aufgabe, fragensss.");
    AddAdditionalTrigger("erzähl etwas");
    -- Small talk: The talk here should focus on possible questions. Feel free to add more!
    AddTraderTrigger("fisher","I catch fisssh and ssell them to landlingss.");
    AddTraderTrigger("fischer","Ich fangenss Fischss und verkaufensss Landlinge.");
    AddTraderTrigger("Cape","You are at Cape Farewell, Zerarisa wavesss landlingsss on boatsss here.");
    AddTraderTrigger("Kap","Wir sindsss am Kap desss Abschiedesss, Zerarisa winkensss Landlinge auf Booten hier.");
    AddAdditionalTrigger("Abschied");
    -- Factions
    AddTraderTrigger("Runewick","Hexenss sindss, Magier sindss. Runewick bössse!");
    AddCondition("lang","german");
    AddTraderTrigger("Runewick","Witchess be, wizardsss be. Runewick evilss!");
    AddCondition("lang","english");
    AddTraderTrigger("Galmair","Zahlenss gut, zahlenss pünktlich. Galmair gutss!");
    AddCondition("lang","german");
    AddTraderTrigger("Galmair","Paying good, paying in time. Galmair goodss!");
    AddCondition("lang","english");
    AddTraderTrigger("Cadomyr","Zss, Zerarisa lebenss hier. Königin gerecht, Königin hübschss, nicht wahr?");
    AddCondition("lang","german");
    AddTraderTrigger("Cadomyr","Zss, Zerarisa living here. Queen jussst, queen pretty, isss not ssshe?");
    AddCondition("lang","english");
    -- Tool hints
    AddTraderTrigger("rod","You'll need a fissshing rod, you can get one from Fredericus, if the line breakss, you need thread to fix.");
    AddCondition("qpg","=",0);
    AddTraderTrigger("rute","Brauchenss Angelrute, gehenss Fredericuss. Wennss Sschnur reißenss, brauchensss Fadensss.");
    AddAdditionalTrigger("angel");
    AddCondition("qpg","=",0);
    AddTraderTrigger("rod","Broke your rod? If itss jusst the line, you can usse thread to fix it. If itss the wood, assk a carpenter for a new one.");
    AddTraderTrigger("rute","Habenss gebrochen die Rute? Wennss die Schnur, brauchenss Faden. Wennss das Holzss, brauchenss Ssschreiner.");
    AddAdditionalTrigger("angel");
    -- Link to other quest
    AddTraderTrigger("Nana","Yesss, the halfling... sshe'll want ssalmonss from me, but I don't have enough for her too. Could you catch ssome yourssself and give them to her?");
    AddCondition("lang","english");
    AddTraderTrigger("Nana","Ja, Halblingsss... Wollenss Lachsss, aber habensss nicht genug für sssie. Fangenss sselbsst und gebensss ihr?");
    AddCondition("lang","german");
    AddTraderTrigger("Winterbutter","Yesss, the halfling... sshe'll want ssalmonss from me, but I don't have enough for her too. Could you catch ssome yourssself and give them to her?");
    AddCondition("lang","english");
    AddTraderTrigger("Winterbutter","Ja, Halblingsss... Wollenss Lachsss, aber habensss nicht genug für sssie. Fangenss sselbsst und gebensss ihr?");
    AddCondition("lang","german");
    -- 1st quest: Take a tool and gather 10 raw materials for 50cp.
    AddTraderTrigger("quest","Zerarisa hass hurt her paw, if you could collect ten trout for me, I give you coinsss.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",0);
    AddCondition("lang","english");
    AddConsequence("item",72,1,399,0);
    AddConsequence("qpg","=",1);
    AddConsequence("inform","[New quest] Cape Farewell I");
    AddTraderTrigger("quest","Sschwester Zerarisa habenss verletzt Pfote, fangenss zssehn Forelle, kriegenss Münzssen.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",0);
    AddCondition("lang","german");
    AddConsequence("item",72,1,399,0);
    AddConsequence("qpg","=",1);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes I");
    AddTraderTrigger("task","Zerarisa hass hurt her paw, if you could collect ten trout for me, I give you coinsss.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",0);
    AddConsequence("item",72,1,399,0);
    AddConsequence("qpg","=",1);
    AddConsequence("inform","[New quest] Cape Farewell I");
    AddTraderTrigger("Auftrag","Sschwester Zerarisa habenss verletzt Pfote, fangenss zssehn Forelle, kriegenss Münzssen.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",0);
    AddConsequence("item",72,1,399,0);
    AddConsequence("qpg","=",1);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes I");
    AddTraderTrigger("quest","Did you get the ten troutss for me yet?");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",1);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Habenss zssehn Forellen? Nein?");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",1);
    AddCondition("lang","german");
    AddTraderTrigger("task","Did you get the ten troutss for me yet?");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",1);
    AddTraderTrigger("Auftrag","Habenss zssehn Forellen? Nein?");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",1);
    AddTraderTrigger(".+","Zerarisa thankss you for the troutss, here, take ssome copperss.");
    AddCondition("qpg","=",1);
    AddCondition("item",73,"all",">",9);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","english");
    AddConsequence("deleteitem",73,10);
    AddConsequence("inform","[Quest solved] You are awarded 50 copper coins and your fishing skill increases. You advance in Queen Rosaline Edwards's favour.");
    AddConsequence("rankpoints","cadomyr","+",5);
    AddConsequence("money","+",50);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",2);
    AddTraderTrigger(".+","Zerarisa dankenss für Forellen, nehmenss Kupfersss.");
    AddCondition("qpg","=",1);
    AddCondition("item",73,"all",">",9);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","german");
    AddConsequence("deleteitem",73,10);
    AddConsequence("inform","[Quest gelöst] Du erhältst 50 Kupferstücke und deine Fischereifertigkeit steigt. Dein Ansehen bei Königin Rosaline Edwards steigt.");
    AddConsequence("rankpoints","cadomyr","+",5);
    AddConsequence("money","+",50);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",2);
    AddTraderTrigger(".+","Zerarisa thankss you for the troutss, here, take ssome copperss.");
    AddCondition("qpg","=",1);
    AddCondition("item",73,"all",">",9);
    AddCondition("lang","english");
    AddConsequence("deleteitem",73,10);
    AddConsequence("inform","[Quest solved] You are awarded 50 copper coins and your fishing skill increases.");
    AddConsequence("money","+",50);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",2);
    AddTraderTrigger(".+","Zerarisa dankenss für Forellen, nehmenss Kupfersss.");
    AddCondition("qpg","=",1);
    AddCondition("item",73,"all",">",9);
    AddCondition("lang","german");
    AddConsequence("deleteitem",73,10);
    AddConsequence("inform","[Quest gelöst] Du erhältst 50 Kupferstücke und deine Fischereifertigkeit steigt.");
    AddConsequence("money","+",50);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",2);
    AddTraderTrigger(".+","Zerarisa iss sstill waiting for the troutss.");
    AddCondition("qpg","=",1);
    AddCondition("item",73,"all","<",10);
    AddCondition("lang","english");
    AddTraderTrigger(".+","Zerarisa wartenss auf Forellen.");
    AddCondition("qpg","=",1);
    AddCondition("item",73,"all","<",10);
    AddCondition("lang","german");
    -- 2nd quest: Gather 20 different raw materials for 100cp.
    AddTraderTrigger("quest","Thankss for troutss again, if you want you can catch twenty ssalmonss for me now.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",2);
    AddCondition("lang","english");
    AddConsequence("qpg","=",3);
    AddConsequence("inform","[New quest] Cape Farewell II");
    AddTraderTrigger("quest","Dankss für Forellen nochmalss, wollenss fangen zsswanzig Lachss nun für Zerarisa?");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",2);
    AddCondition("lang","german");
    AddConsequence("qpg","=",3);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes II");
    AddTraderTrigger("task","Thankss for troutss again, if you want you can catch twenty ssalmonss for me now.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",2);
    AddConsequence("qpg","=",3);
    AddConsequence("inform","[New quest] Cape Farewell II");
    AddTraderTrigger("Auftrag","Dankss für Forellen nochmalss, wollenss fangen zsswanzig Lachss nun für Zerarisa?");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",2);
    AddConsequence("qpg","=",3);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes II");
    AddTraderTrigger("quest","Twenty ssalmonss for Zerarisa, and you get coinss.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",3);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Zsswanzigs Lachsess, kriegenss Münzssenss.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",3);
    AddCondition("lang","german");
    AddTraderTrigger("task","Twenty ssalmonss for Zerarisa, and you get coinss.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",3);
    AddTraderTrigger("Auftrag","Zsswanzigs Lachsess, kriegenss Münzssenss.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",3);
    AddTraderTrigger(".+","Thankss for ssalmonss, Zerarisa hass coinss for you.");
    AddCondition("qpg","=",3);
    AddCondition("item",355,"all",">",19);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","english");
    AddConsequence("deleteitem",355,20);
    AddConsequence("inform","[Quest solved] You are awarded 100 copper coins and your fishing skill increases. You advance in Queen Rosaline Edwards's favour.");
    AddConsequence("rankpoints","cadomyr","+",10);
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",4);
    AddTraderTrigger(".+","Dankss für Lachsss, Zerarisa habenss Münzssen für dich.");
    AddCondition("qpg","=",3);
    AddCondition("item",355,"all",">",19);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","german");
    AddConsequence("deleteitem",355,20);
    AddConsequence("inform","[Quest gelöst] Du erhältst 100 Kupferstücke und deine Fischereifertigkeit steigt. Dein Ansehen bei Königin Rosaline Edwards steigt.");
    AddConsequence("rankpoints","cadomyr","+",10);
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",4);
    AddTraderTrigger(".+","Thankss for ssalmonss, Zerarisa hass coinss for you.");
    AddCondition("qpg","=",3);
    AddCondition("item",355,"all",">",19);
    AddCondition("lang","english");
    AddConsequence("deleteitem",355,20);
    AddConsequence("inform","[Quest solved] You are awarded 100 copper coins and your fishing skill increases.");
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",4);
    AddTraderTrigger(".+","Dankss für Lachsss, Zerarisa habenss Münzssen für dich.");
    AddCondition("qpg","=",3);
    AddCondition("item",355,"all",">",19);
    AddCondition("lang","german");
    AddConsequence("deleteitem",355,20);
    AddConsequence("inform","[Quest gelöst] Du erhältst 100 Kupferstücke und deine Fischereifertigkeit steigt.");
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",4);
    AddTraderTrigger(".+","Zerarisa sstill waitss for her ssalmonss.");
    AddCondition("qpg","=",3);
    AddCondition("item",355,"all","<",20);
    AddCondition("lang","english");
    AddTraderTrigger(".+","Zerarisa immernoch wartenss für Lachsss.");
    AddCondition("qpg","=",3);
    AddCondition("item",355,"all","<",20);
    AddCondition("lang","german");
    -- 3rd quest: 5 raw materials for 100cp
    AddTraderTrigger("quest","Zerarisa needss five roasst trout now, you can cookss them at a ssmoke oven. You'll get coinsss.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",4);
    AddCondition("lang","english");
    AddConsequence("qpg","=",5);
    AddConsequence("inform","[New quest] Cape Farewell III");
    AddTraderTrigger("quest","Zerarisa brauchenss fünf geräuchert Forellenss nun, könnenss räuchern in Ofenss. Kriegensss Münzssenss!");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",4);
    AddCondition("lang","german");
    AddConsequence("qpg","=",5);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes III");
    AddTraderTrigger("task","Zerarisa needss five roasst trout now, you can cookss them at a ssmoke oven. You'll get coinsss.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",4);
    AddConsequence("qpg","=",5);
    AddConsequence("inform","[New quest] Cape Farewell III");
    AddTraderTrigger("Auftrag","Zerarisa brauchenss fünf geräuchert Forellenss nun, könnenss räuchern in Ofenss. Kriegensss Münzssenss!");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",4);
    AddConsequence("qpg","=",5);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes III");
    AddTraderTrigger("quest","Have you the five roasst trout? Catch five trout and smoke them at an oven.");
    AddAdditionalTrigger("mission");
    AddCondition("qpg","=",5);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Habenss fünf geräuchertss Forellenss? Fangenss und räuchernss in Räuchehütte.");
    AddAdditionalTrigger("mission");
    AddCondition("qpg","=",5);
    AddCondition("lang","german");
    AddTraderTrigger("task","Have you the five roasst trout? Catch five trout and cook them at an oven.");
    AddAdditionalTrigger("adventure");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",5);
    AddTraderTrigger("Auftrag","Habenss fünf geräuchertss Forellenss? Fangenss und räuchernss in Räuchehütte.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",5);
    AddTraderTrigger(".+","Zerarisa thanksss you for the troutss, here...");
    AddCondition("qpg","=",5);
    AddCondition("item",455,"all",">",4);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","english");
    AddConsequence("deleteitem",455,5);
    AddConsequence("inform","[Quest solved] You are awarded 100 copper coins and your fishing skill increases. You advance in Queen Rosaline Edwards's favour.");
    AddConsequence("rankpoints","cadomyr","+",15);
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",6);
    AddTraderTrigger(".+","Zerarisa dankenss für Forellenss, nehmenss...");
    AddCondition("qpg","=",5);
    AddCondition("item",455,"all",">",4);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","german");
    AddConsequence("deleteitem",455,5);
    AddConsequence("inform","[Quest gelöst] Du erhältst 100 Kupferstücke und deine Fischereifertigkeit steigt. Dein Ansehen bei Königin Rosaline Edwards steigt.");
    AddConsequence("rankpoints","cadomyr","+",15);
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",6);
    AddTraderTrigger(".+","Zerarisa thanksss you for the troutss, here...");
    AddCondition("qpg","=",5);
    AddCondition("item",455,"all",">",4);
    AddCondition("lang","english");
    AddConsequence("deleteitem",455,5);
    AddConsequence("inform","[Quest solved] You are awarded 100 copper coins and your fishing skill increases.");
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",6);
    AddTraderTrigger(".+","Zerarisa dankenss für Forellenss, nehmenss...");
    AddCondition("qpg","=",5);
    AddCondition("item",455,"all",">",4);
    AddCondition("lang","german");
    AddConsequence("deleteitem",455,5);
    AddConsequence("inform","[Quest gelöst] Du erhältst 100 Kupferstücke und deine Fischereifertigkeit steigt.");
    AddConsequence("money","+",100);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",6);
    AddTraderTrigger(".+","Zerarisa wartenss auf fünf geräuchertss Forellenss, wollenss!");
    AddCondition("qpg","=",5);
    AddCondition("item",455,"all","<",5);
    AddCondition("lang","german");
    AddTraderTrigger(".+","Zerarisa ssstill waitss for roasst trout, sshe wantss five.");
    AddCondition("qpg","=",5);
    AddCondition("item",455,"all","<",5);
    AddCondition("lang","english");
    -- 4th quest: Gather 10 raw materials from a totally different location for 200cp. Link to other quest. Hint how to get there.
    AddTraderTrigger("quest","Do Zerarisa favour, go findss Henry, he'ss butcher in Dewy Sswampss, getss me ten piecess of leather from him.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",6);
    AddCondition("lang","english");
    AddConsequence("qpg","=",7);
    AddConsequence("inform","[New quest] Cape Farewell IV");
    AddTraderTrigger("quest","Tuenss Zerarisa Gefallen, findenss Henry, isst Sschlachter in Morgentausumpfss, bringenss zehn Lederhäute von ihmss.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",6);
    AddCondition("lang","german");
    AddConsequence("qpg","=",7);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes IV");
    AddTraderTrigger("task","Do Zerarisa favour, go findss Henryss, he'ss butcher in Dewy Swampss, getss me ten piecess of leather from him.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",6);
    AddConsequence("qpg","=",7);
    AddConsequence("inform","[New quest] Cape Farewell IV");
    AddTraderTrigger("Auftrag","Tuenss Zerarisa Gefallen, findenss Henry, isst Sschlachter in Morgentausumpfss, bringenss zehn Lederhäute von ihmss.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",6);
    AddConsequence("qpg","=",7);
    AddConsequence("inform","[Neues Quest] Kap des Abschiedes IV");
    AddTraderTrigger("quest","You findss Henry in Dewy Swampss? He owess me ten piecess of leather.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",7);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Habenss sschon gefundenss Henry in Morgentausumpfss? Schuldenss zehn Lederhäute.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",7);
    AddCondition("lang","german");
    AddTraderTrigger("task","You findss Henry in Dewy Swampss? He owess me ten piecess of leather.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",7);
    AddTraderTrigger("Auftrag","Habenss sschon gefundenss Henry in Morgentausumpfss? Schuldenss zehn Lederhäute.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",7);
    AddTraderTrigger(".+","Zerarisa dankenss dir, hier sindsss Geld für Ärgerss.");
    AddCondition("qpg","=",7);
    AddCondition("item",2547,"all",">",9);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","german");
    AddConsequence("deleteitem",2547,10);
    AddConsequence("inform","[Quest gelöst] Du erhältst 200 Kupferstücke und deine Fischereifertigkeit steigt. Dein Ansehen bei Königin Rosaline Edwards steigt.");
    AddConsequence("rankpoints","cadomyr","+",20);
    AddConsequence("money","+",200);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",8);
    AddTraderTrigger(".+","Zerarisa thanksss you, here'ss money for your troubless.");
    AddCondition("qpg","=",7);
    AddCondition("item",2547,"all",">",9);
    AddCondition("town","=","cadomyr");
    AddCondition("lang","english");
    AddConsequence("deleteitem",2547,10);
    AddConsequence("inform","[Quest solved] You are awarded 200 copper coins and your fishing skill increases. You advance in Queen Rosaline Edwards's favour.");
    AddConsequence("rankpoints","cadomyr","+",20);
    AddConsequence("money","+",200);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",8);
    AddTraderTrigger(".+","Zerarisa dankenss dir, hier sindsss Geld für Ärgerss.");
    AddCondition("qpg","=",7);
    AddCondition("item",2547,"all",">",9);
    AddCondition("lang","german");
    AddConsequence("deleteitem",2547,10);
    AddConsequence("inform","[Quest gelöst] Du erhältst 200 Kupferstücke und deine Fischereifertigkeit steigt.");
    AddConsequence("money","+",200);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",8);
    AddTraderTrigger(".+","Zerarisa thanksss you, here'ss money for your troubless.");
    AddCondition("qpg","=",7);
    AddCondition("item",2547,"all",">",9);
    AddCondition("lang","english");
    AddConsequence("deleteitem",2547,10);
    AddConsequence("inform","[Quest solved] You are awarded 200 copper coins and your fishing skill increases.");
    AddConsequence("money","+",200);
    AddConsequence("skill","crafting","fishing","+",1);
    AddConsequence("qpg","=",8);
    AddTraderTrigger(".+","Zerarisa wartenss noch auf Leder von Henry in Morgentaussumpf.");
    AddCondition("qpg","=",7);
    AddCondition("item",2547,"all","<",10);
    AddCondition("lang","german");
    AddTraderTrigger(".+","Zerarisa sstill waitss for leather from Henry in Dewy Swampss.");
    AddCondition("qpg","=",7);
    AddCondition("item",2547,"all","<",10);
    AddCondition("lang","english");
    -- Final dialogue: No more quests, just nice hints
    AddTraderTrigger("quest","Zerarisa hass no more jobss for you, sshe hass enough fissh.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",8);
    AddCondition("lang","english");
    AddTraderTrigger("quest","Zerarisa habenss nichts mehr Aufgabe für dich, habenss genug Fissch.");
    AddAdditionalTrigger("mission");
    AddAdditionalTrigger("job");
    AddCondition("qpg","=",8);
    AddCondition("lang","german");
    AddTraderTrigger("task","Zerarisa hass enough fissh, no more jobss for you.");
    AddAdditionalTrigger("adventure");
    AddCondition("qpg","=",8);
    AddTraderTrigger("Auftrag","Zerarisa habenss nichts mehr Aufgabe für dich, habenss genug Fissch.");
    AddAdditionalTrigger("Aufgabe");
    AddAdditionalTrigger("Abenteuer");
    AddCondition("qpg","=",8);
    -- Last catch: Think about keyphrases the player might say and that are not caught until here
    AddTraderTrigger("Dewy","Zss, Dewy Sswampss be Runewick landss. Go far, north, easst.");
    AddAdditionalTrigger("swamps");
    AddTraderTrigger("Morgentau","Zss, Morgentaussumpf seienss Runewickland. Gehenss weit, Nord, Osst.");
    AddAdditionalTrigger("Sumpf");
    AddTraderTrigger("Yes","What iss the yess for? If you want a job assk me for a job.");
    AddAdditionalText("You are very agreeable persson, but if you want job, assk for job.");
    AddTraderTrigger("Ja","Wass meinenss mit ja? Wollenss Aufgabe, fragenss Aufgabe.");
    AddAdditionalText("Seienss zssustimmend, aber wenn wollenss Aufgabe, fragenss Aufgabe.");
    AddTraderTrigger("No","You isss not very nice?");
    AddAdditionalText("No, zss?");
    AddTraderTrigger("Nein","Du seienss nicht ssehr nett?");
    AddAdditionalText("Nein, zss?");
    -- Cycletext: Please add at least(!) five cycletext messages. The more, the better. You can use emotes (#me is green), too.
    AddCycleText("#me kratzt sich an ihrer schlaff runterhängenden Pfote.","#me lazily scratches a limp-looking paw.");
    AddCycleText("#me setzt sich hin und schaut gedankenverloren drein.","#me sits down on the ground and looks thoughtfully.");
    AddCycleText("#me stinkt nach Fisch.","#me smells strongly of fish.");
    AddCycleText("#me bleckt die Zähne während sie hungrig aufs Wasser schaut.","#me flicks her lips as she looks hungrily towards the water.");
    AddCycleText("#me pult Dreck unter ihren Krallen hervor.","#me cleans under her claws.");
    AddCycleText("Zsss.","Zsss.");
    AddCycleText("Zsss!","Zsss!");
    AddCycleText("Zsss?","Zsss?");
    AddCycleText("#me zischelt.","#me hisses.");
    -- ********* END DYNAMIC PART ********
    TradSpeakLang={0,1};
    TradStdLang=0;

    increaseLangSkill(TradSpeakLang);
    thisNPC.activeLanguage=TradStdLang;

end

function nextCycle()  -- ~10 times per second
    initializeNpc();
    SpeakerCycle();
end

function receiveText(texttype, message, originator)
    if BasicNPCChecks(originator,2) then
        if LangOK(originator,TradSpeakLang) then
            TellSmallTalk(message,originator);
        else
            Confused(
               "#me sieht dich leicht verwirrt an",
               "#me looks at you a little confused"
            );
        end
    end
end